<div class="cf">
<div id="race-table" style="width:915px;float:left">
<table id="vote-table">
	<thead>
		<tr>
		<% @race.race_horses.size.downto(1) do |number| %>
			<th class="<%= horse_number_colors(number - 1) %>"><%= number %></th>
		<% end %>
			<!-- ここまで -->
			<th>　</th>
		</tr>
	</thead>
	<tbody>
		<tr>
		<% @race.race_horses.reverse_each do |race_horse| %>
      <% book = race_horse.book %>
      <% image_url = book.medium_image_url || book.large_image_url || book.small_image_url %>
			<td><%= link_to image_tag(image_url, size: '60x90', alt: "image"), book.item_url %></td>
		<% end %>
			<td class="title"><%= row_text("イメージ").html_safe %></td>
		</tr><!-- イメージ -->
		<tr>
		<% @race.race_horses.reverse_each do |race_horse| %>
			<td><%= row_text(race_horse.book.title).html_safe %></td>
		<% end %>
			<td class="title"><%= row_text("著名").html_safe %></td>
		</tr><!--　著名 -->
		<tr>
		<% @race.race_horses.reverse_each do |race_horse| %>
			<td><%= row_text(race_horse.book.author).html_safe %></td>
		<% end %>
			<td class="title"><%= row_text("著者").html_safe %></td>
		</tr><!-- 著者 -->
		<tr>
		<% @race.race_horses.reverse_each do |race_horse| %>
			<td><%= row_text(race_horse.book.publisher).html_safe %></td>
		<% end %>
			<td class="title"><%= row_text("出版社").html_safe %></td>
		</tr><!-- 出版社 -->
		<tr>
		<% @race.race_horses.reverse_each do |race_horse| %>
			<td><%= race_horse.odds %></td>
    <% end %>
			<td class="title"><%= row_text("オッズ").html_safe %></td>
		</tr><!-- オッズ -->
		<% unless @card %>
			<% @race.race_horses.each do |horse| %>
			  <td id="vote_item_<%= horse.id %>" class="vote_item">
          <%= label "vote_items", horse.id, '', {:class => 'valid-message'} %>
          <%= select "vote_items", horse.id, VoteItem::EXPECTATION.map {|k,v| [v,k]},
            {:include_blank => true}, {:style => 'padding:0' ,:class => 'require lib-select lib-select-small'} %>
			  </td>
			<% end %>
		<% else %>
			<% @race.race_horses.each do |horse| %>
			<td>
        <% vote_item = @card.vote_items.find {|item| item.race_horse == horse} %>
        <% if vote_item %>
				  <select class="lib-select lib-select-small" disabled>
					  <option value=""><%= VoteItem::EXPECTATION[vote_item.point_weight] %></option>
				  </select>
        <% end %>
			</td>
			<% end %>
		<% end %>
			<td class="title"><%= row_text("選択").html_safe %></td>
		</tr>
	</tbody>
</table>
</div>
<div id="race-caption" style="width:65px;float:left">
    <h3 style="font-weight:bold;text-align:center;font-size:140%;"><%= (@race.genre.name[0,3]) %></h3>
	<div style="font-weight:bold;background:#000;color:#FFF;font-size:250%;text-align:center;padding:10px;"><%= (@race.id.to_s) %></div>
	<h4 style="text-align:center;font-weight:bold;font-size:130%">発走</h4>
	<h4 style="text-align:center;font-weight:bold;font-size:110%"><%= @race.start_date.strftime("%m-%d") %></h4>
	<h3 style="font-weight:bold;text-align:center;font-size:150%;padding:10px;"> <%= row_text(@race.name).html_safe %> <%= "(" + Race::GRADES[@race.grade] +")"%></h3>
</div>
</div>
<div class="submit lib-aside-mTop" style="text-align: center">
<% unless @card %>
	<button class="lib-btn-black lib-button-large" style="font-size:200%;">投票する</button>
<% end %>
	<%= link_to "戻　る" , root_path , :class => "lib-btn lib-button-large" , :style => "margin-left:20px;font-size:200%;" %>
</div>
<style type="text/css" media="screen">
#race-table td {width:97px;}
.title td {width:10px;}
.require {margin-top:10px;margin-bottom:5px;}
label.valid-message {
	color:#FF7700;
	background:#FFF;
	font-weight:bold;
	line-height:2.2em;
	padding:0 3px;
	border-radius:5px;
	border:2px solid #FF7700;
	display:block;
	position: relative;
}
label.valid-ok {
	color:#FFF;
	background:#FF7700;
	font-weight:bold;
	line-height:2.2em;
	padding:0 3px;
	border-radius:5px;
	border:2px solid #FF7700;
	display:block;
	position: relative;
}
label.valid-none {
  color: transparent;
	background:transparent;
	font-weight:bold;
	line-height:2.2em;
	padding:0 3px;
	border-radius:5px;
	border:2px solid transparent;
	display:block;
	position: relative;
}
label.valid-error{
	color:#FFF;
	background:#FF7700;
}
label.valid-success{
	color:#FF6600;
	background: #FAFAFA;
	border:2px solid #999;
}
</style>
